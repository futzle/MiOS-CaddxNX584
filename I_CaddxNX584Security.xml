<?xml version="1.0"?>
<implementation>
	<settings>
		<protocol>raw</protocol>
	</settings>
	<functions>
local plugin

function caddxInitialize(lul_device)
	if (package.path:find("/etc/cmh-ludl/?.lua;/etc/cmh-lu/?.lua", 1, true) == nil) then
		package.path = package.path .. ";/etc/cmh-ludl/?.lua;/etc/cmh-lu/?.lua"
	end
	package.loaded.L_CaddxNX584Security = nil
	plugin = require("L_CaddxNX584Security")
	return plugin.caddxInitialize(lul_device)
end
	</functions>

	<incoming>
		<lua>
			plugin.handleReadByteResult(lul_device, plugin.readByte(lul_data));
		</lua>
	</incoming>

	<startup>caddxInitialize</startup>

	<actionList>
		<action>
			<serviceId>urn:micasaverde-com:serviceId:SecuritySensor1</serviceId>
			<name>SetArmed</name>
			<job>
				return plugin.jobSetArmed(lul_device, lul_settings, lul_job)
			</job>
			<incoming>
				return plugin.checkJobComplete(lul_job)
			</incoming>
			<timeout>
				return plugin.checkJobComplete(lul_job)
			</timeout>
		</action>
		<action>
			<serviceId>urn:micasaverde-com:serviceId:AlarmPartition1</serviceId>
			<name>RequestQuickArmMode</name>
			<job>
				return plugin.jobRequestQuickArmMode(lul_device, lul_settings, lul_job)
			</job>
			<incoming>
				return plugin.checkJobComplete(lul_job)
			</incoming>
			<timeout>
				return plugin.checkJobComplete(lul_job)
			</timeout>
		</action>
		<action>
			<serviceId>urn:micasaverde-com:serviceId:AlarmPartition1</serviceId>
			<name>RequestArmMode</name>
			<job>
				return plugin.jobRequestArmMode(lul_device, lul_settings, lul_job)
			</job>
			<incoming>
				return plugin.checkJobComplete(lul_job)
			</incoming>
			<timeout>
				return plugin.checkJobComplete(lul_job)
			</timeout>
		</action>
		<action>
			<serviceId>urn:micasaverde-com:serviceId:AlarmPartition1</serviceId>
			<name>RequestPanicMode</name>
			<job>
				return plugin.jobRequestPanicMode(lul_device, lul_settings, lul_job)
			</job>
			<incoming>
				return plugin.checkJobComplete(lul_job)
			</incoming>
			<timeout>
				return plugin.checkJobComplete(lul_job)
			</timeout>
		</action>
	</actionList>
</implementation>
